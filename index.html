<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tip Screen</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      overflow: hidden;
    }
    .main-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      width: 100%;
      padding: 1rem;
      box-sizing: border-box;
    }
    @media (orientation: landscape) and (max-width: 767px) {
      .main-container {
        flex-direction: row;
        padding: 0.5rem;
      }
      .content-card {
        max-width: 95%;
        height: auto;
        padding: 1rem;
      }
      .tip-options-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
      }
      .tip-button {
        padding: 0.75rem;
        font-size: 0.9rem;
      }
      h1 {
        font-size: 1.75rem;
        margin-bottom: 0.5rem;
      }
      p {
        font-size: 1rem;
        margin-bottom: 1rem;
      }
      .card-form-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
      }
      .card-form-grid .col-span-2 {
        grid-column: span 2 / span 2;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-400 to-blue-600">

  <div class="main-container">
    <div id="content-card" class="bg-white p-6 rounded-2xl shadow-2xl w-full max-w-md mx-auto transition-all duration-300 content-card">
      <div id="tip-screen-content">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-4">Tip Amount</h1>
        <p class="text-center text-gray-600 mb-6 text-lg">Please select a tip option:</p>

        <div id="tip-options-container" class="grid grid-cols-2 gap-3 mb-4 tip-options-grid"></div>

        <button id="no-tip-button" class="w-full p-3 rounded-xl text-lg font-medium mt-3 transition-all duration-200 ease-in-out
                                            bg-gray-100 text-gray-800 hover:bg-red-100 hover:text-red-700 hover:shadow-md
                                            focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75">
          No Tip
        </button>

        <button id="confirm-button" class="w-full p-3 rounded-xl text-xl font-bold mt-5 shadow-lg
                                            bg-green-500 text-white hover:bg-green-600 transition-all duration-300 ease-in-out transform hover:scale-105
                                            focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-75">
          Proceed
        </button>
      </div>
    </div>
  </div>

  <script>
    let selectedTip = null;
    let isProcessing = false;

    const tipOptions = [
      { amount: 0.05, label: '5%' },
      { amount: 0.15, label: '15%' },
      { amount: 0.30, label: '30%' },
      { amount: 0.50, label: '50%' },
    ];

    const tipOptionsContainer = document.getElementById('tip-options-container');
    const noTipButton = document.getElementById('no-tip-button');
    const confirmButton = document.getElementById('confirm-button');

    function renderTipButtons() {
      tipOptionsContainer.innerHTML = '';
      tipOptions.forEach(option => {
        const isSelected = selectedTip === option.amount;

        const button = document.createElement('button');
        button.textContent = option.label;
        button.className = `
          tip-button p-3 rounded-xl text-lg font-medium transition-all duration-200 ease-in-out
          ${isSelected
            ? 'bg-blue-600 text-white shadow-lg transform translate-y-[-2px] scale-105 ring-2 ring-blue-300'
            : 'bg-gray-100 text-gray-800 hover:bg-blue-100 hover:text-blue-700 hover:shadow-md'}
          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75
        `;
        button.onclick = () => handleTipSelect(option.amount);

        if (isProcessing) {
          button.disabled = true;
          button.classList.add('opacity-50', 'cursor-not-allowed');
        } else {
          button.disabled = false;
          button.classList.remove('opacity-50', 'cursor-not-allowed');
        }

        tipOptionsContainer.appendChild(button);
      });

      if (selectedTip === 0) {
        noTipButton.classList.add('bg-red-600', 'text-white', 'shadow-lg', 'transform', 'translate-y-[-2px]', 'scale-105', 'ring-2', 'ring-red-300');
        noTipButton.classList.remove('bg-gray-100', 'text-gray-800', 'hover:bg-red-100', 'hover:text-red-700', 'hover:shadow-md');
      } else {
        noTipButton.classList.remove('bg-red-600', 'text-white', 'shadow-lg', 'transform', 'translate-y-[-2px]', 'scale-105', 'ring-2', 'ring-red-300');
        noTipButton.classList.add('bg-gray-100', 'text-gray-800', 'hover:bg-red-100', 'hover:text-red-700', 'hover:shadow-md');
      }

      if (isProcessing) {
        noTipButton.disabled = true;
        noTipButton.classList.add('opacity-50', 'cursor-not-allowed');
      } else {
        noTipButton.disabled = false;
        noTipButton.classList.remove('opacity-50', 'cursor-not-allowed');
      }
    }

    function handleTipSelect(amount) {
      if (isProcessing) return;
      selectedTip = amount;
      updateUI();
    }

    function handleNoTip() {
      if (isProcessing) return;
      selectedTip = 0;
      updateUI();
    }

    function handleConfirm() {
      if (isProcessing) return;
      isProcessing = true;

      const originalText = confirmButton.textContent;

      let messageText;
      let messageColorClasses;

      if (selectedTip === 0.50) {
        messageText = 'Fulfilled. âœ…';
        messageColorClasses = ['bg-green-500', 'hover:bg-green-600', 'focus:ring-green-700'];
      } else {
        messageText = 'Denied ðŸš«';
        messageColorClasses = ['bg-red-600', 'hover:bg-red-700', 'focus:ring-red-800'];
      }

      confirmButton.textContent = messageText;
      confirmButton.classList.remove('bg-green-500', 'hover:bg-green-600', 'focus:ring-green-700', 'bg-red-600', 'hover:bg-red-700', 'focus:ring-red-800');
      confirmButton.classList.add(...messageColorClasses);
      confirmButton.disabled = true;

      updateUI();

      setTimeout(() => {
        if (selectedTip === 0.50) {
          window.location.href = 'https://www.instagram.com/luka_kandelaki/';
        } else {
          confirmButton.textContent = originalText;
          confirmButton.classList.remove(...messageColorClasses);
          confirmButton.classList.add('bg-green-500', 'hover:bg-green-600', 'focus:ring-green-700');
          confirmButton.disabled = false;
          isProcessing = false;
          selectedTip = null;
          updateUI();
        }
      }, 2000);
    }

    function updateUI() {
      renderTipButtons();
    }

    noTipButton.onclick = handleNoTip;
    confirmButton.onclick = handleConfirm;

    document.addEventListener('DOMContentLoaded', updateUI);
  </script>

</body>
</html>
